{% comment %} normalize current path so / and /index.html match {% endcomment %}
{% assign current = page.url %}
{% if current == '/index.html' %}{% assign current = '/' %}{% endif %}

<nav class="navbar navbar-expand-lg navbar-light shadow-sm fixed-top">
  <div class="container">

    <button class="navbar-toggler d-lg-none" type="button"
            data-bs-toggle="offcanvas" data-bs-target="#mobileMenu"
            aria-controls="mobileMenu" aria-label="Toggle menu">
      <span class="navbar-toggler-icon"></span>
    </button>

    
    <div class="collapse navbar-collapse d-none d-lg-flex justify-content-between" id="navbarNav">
      <!-- LEFT: site links -->
      <ul class="navbar-nav me-auto">
        <li class="nav-item">
          <a class="nav-link {% if current == '/' %}is-active{% endif %}"
             href="{{ '/' | relative_url }}"
             {% if current == '/' %}aria-current="page"{% endif %}>Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link {% if current == '/cv.html' %}is-active{% endif %}"
             href="{{ '/cv.html' | relative_url }}"
             {% if current == '/cv.html' %}aria-current="page"{% endif %}>CV</a>
        </li>
        <li class="nav-item">
          <a class="nav-link {% if current == '/projects.html' %}is-active{% endif %}"
             href="{{ '/projects.html' | relative_url }}"
             {% if current == '/projects.html' %}aria-current="page"{% endif %}>Projects</a>
        </li>
        <li class="nav-item">
          <a class="nav-link {% if current == '/contact.html' %}is-active{% endif %}"
             href="{{ '/contact.html' | relative_url }}"
             {% if current == '/contact.html' %}aria-current="page"{% endif %}>Contact</a>
        </li>
      </ul>

      <!-- RIGHT: icons -->
      <ul class="navbar-nav ms-auto align-items-center gap-4">
        <li class="nav-item">
          <a class="nav-link p-0" href="mailto:jbb43@njit.edu" aria-label="Email Jack">
            <img class="nav-icon" src="assets/images/email-icon.svg" alt="Email" width="42" height="42" loading="lazy" color ="ffffff">
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link p-0" href="https://www.linkedin.com/in/jackbland-data" target="_blank" rel="noopener" aria-label="LinkedIn">
            <img class="nav-icon" src="assets/images/linkedin-icon.svg" alt="LinkedIn" width="34" height="34" loading="lazy">
          </a>
        </li>
      </ul>
    </div>
  </div>
</nav>

<!-- Mobile Off-Canvas Menu -->
<div class="offcanvas offcanvas-end" tabindex="-1" id="mobileMenu">
  <button type="button" class="btn-close position-absolute end-0 me-3 mt-3"
          data-bs-dismiss="offcanvas" aria-label="Close"></button>

  <div class="offcanvas-body">
    {% assign here = page.url | relative_url %}
    {% assign home_href = '/' | relative_url %}
    {% assign cv_href = '/cv.html' | relative_url %}
    {% assign projects_href = '/projects.html' | relative_url %}
    {% assign contact_href = '/contact.html' | relative_url %}

    <nav class="mobile-menu">
      <a href="{{ home_href }}"     class="mobile-link {% if here == home_href %}is-active{% endif %}"     {% if here == home_href %}aria-current="page"{% endif %}>Home</a>
      <a href="{{ cv_href }}"       class="mobile-link {% if here == cv_href %}is-active{% endif %}"       {% if here == cv_href %}aria-current="page"{% endif %}>CV</a>
      <a href="{{ projects_href }}" class="mobile-link {% if here == projects_href %}is-active{% endif %}" {% if here == projects_href %}aria-current="page"{% endif %}>Projects</a>
      <a href="{{ contact_href }}"  class="mobile-link {% if here == contact_href %}is-active{% endif %}"  {% if here == contact_href %}aria-current="page"{% endif %}>Contact</a>
    </nav>
  </div>
</div